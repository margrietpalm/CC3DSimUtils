
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SimUtils.Experiment &mdash; OpenSimUtils 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="OpenSimUtils 1.0 documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../SimUtils.html">OpenSimUtils 1.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for SimUtils.Experiment</h1><div class="highlight"><pre>
<span class="c">#*******************************************************************#</span>
<span class="c"># written by: Margriet Palm (08-03-10)		                        #</span>
<span class="c">#-------------------------------------------------------------------#</span>
<span class="c">#                                                                   #</span>
<span class="c"># tools for setting up batch jobs for CC3D                          #</span>
<span class="c">#*******************************************************************#</span>
<span class="kn">import</span> <span class="nn">xml.dom.minidom</span> <span class="kn">as</span> <span class="nn">xdm</span>

<div class="viewcode-block" id="Experiment"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment">[docs]</a><span class="k">class</span> <span class="nc">Experiment</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; The class Experiments holds the data for a CC3D experiment as an xml object. This objects is created from a template xml file. Elements that are already present in the template can be changed or removed and new elements can be added. When the xml is written to file all unchanged content of the template, including commented xml, is written to the new file.</span>
<span class="sd">    &quot;&quot;&quot;</span>       
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">templatefile</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Instantiate experiment based on a given template </span>
<span class="sd">        </span>
<span class="sd">        :param templatefile: path to xml template</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="n">xdm</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">templatefile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cc3d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;CompuCell3D&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">potts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;Potts&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plugins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;Plugin&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">steppables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;Steppable&quot;</span><span class="p">)</span>
    
    <span class="c">#-- Private functions --#</span>
    <span class="k">def</span> <span class="nf">_setNodeValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">node</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set value of an element.</span>
<span class="sd">        </span>
<span class="sd">        :param node: xml element</span>
<span class="sd">        :param value: value of xml element</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">childNodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">createTextNode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
            <span class="n">node</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">node</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">nodeValue</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">_getElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">parent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get element</span>
<span class="sd">            </span>
<span class="sd">        :param name: element name</span>
<span class="sd">        :param parent: parent node</span>
<span class="sd">            :return: xml element</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">parent</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="n">name</span><span class="p">))</span><span class="o">==</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">parent</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="n">name</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">element</span>

    <span class="k">def</span> <span class="nf">_getPluginByName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get CC3D plugin element by plugin name</span>
<span class="sd">           </span>
<span class="sd">        :param name: name of the plugin</span>
<span class="sd">        :return: xml element with plugin specification   </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">plugin</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugins</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">plugin</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;Name&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">plugin</span>
        <span class="n">plugin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cc3d</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">plugin</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">plugin</span>

    <span class="k">def</span> <span class="nf">_getSteppableByType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Get CC3D steppable element by steppable type</span>
<span class="sd">            </span>
<span class="sd">        :param type: type of the steppable</span>
<span class="sd">        :return: xml element with steppable specification  </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">steppable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">steppables</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">steppable</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;Type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">steppable</span>
        <span class="n">steppable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;Steppable&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setAttribute</span><span class="p">(</span><span class="s">&quot;Type&quot;</span><span class="p">,</span><span class="nb">type</span><span class="p">,</span><span class="n">steppable</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cc3d</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">steppable</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">steppable</span>

    <span class="k">def</span> <span class="nf">_setAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="n">parent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set attribute value of an xml element</span>
<span class="sd">            </span>
<span class="sd">        :param name: attribute name</span>
<span class="sd">        :param value: attribute value</span>
<span class="sd">        :param parent: parent node</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">parent</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="n">parent</span><span class="o">.</span><span class="n">setAttributeNode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">createAttribute</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)))</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="c">#-- Function to set simple property in the Potts element --#</span>
<div class="viewcode-block" id="Experiment.setPottsProperty"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.setPottsProperty">[docs]</a>    <span class="k">def</span> <span class="nf">setPottsProperty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tagname</span><span class="p">,</span><span class="n">attributes</span><span class="o">=</span><span class="p">{},</span><span class="n">value</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; General function to set a parameter in the Potts element</span>
<span class="sd">            </span>
<span class="sd">        :param tagname: name of the element</span>
<span class="sd">        :param attributes: dictionary with attribute names as key and attribute values as values.</span>
<span class="sd">        :param value: element value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getElement</span><span class="p">(</span><span class="n">tagname</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">potts</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="n">attributes</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setAttribute</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">),</span> <span class="n">tag</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setNodeValue</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
    
    <span class="c">#-- Delete element in the Potts element --#</span>
</div>
<div class="viewcode-block" id="Experiment.deletePottsProperty"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.deletePottsProperty">[docs]</a>    <span class="k">def</span> <span class="nf">deletePottsProperty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tagname</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Remove element from the Potts element</span>
<span class="sd">            </span>
<span class="sd">        :param tagname: name of element</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">potts</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="n">tagname</span><span class="p">)</span>
    
    <span class="c">#-- Generic functions to set or create a Plugin or Steppable --#</span>
    <span class="c">#-- Only support single depth elements                       --#</span></div>
<div class="viewcode-block" id="Experiment.setGenericPlugin"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.setGenericPlugin">[docs]</a>    <span class="k">def</span> <span class="nf">setGenericPlugin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">elements</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot; Set generic plugin. If the plugin is already in the template, it is updated. If not, the plugin is added to the model. This function does not support multi-level xml elements.</span>
<span class="sd">            </span>
<span class="sd">        :param name: plugin name</span>
<span class="sd">        :param elements: list of elements described by a dictionary: {&#39;name&#39;:name,&#39;value&#39;:val,&#39;attributes&#39;:{}}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># element = {&#39;name&#39;:name,&#39;value&#39;:val,&#39;attributes&#39;:{}}</span>
        <span class="n">plugin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getPluginByName</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getElement</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">],</span> <span class="n">plugin</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">&#39;value&#39;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>            
                <span class="bp">self</span><span class="o">.</span><span class="n">_setNodeValue</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">e</span><span class="p">[</span><span class="s">&#39;value&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="s">&#39;attributes&#39;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="n">e</span><span class="p">[</span><span class="s">&#39;attributes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_setAttribute</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">element</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="Experiment.deletePlugin"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.deletePlugin">[docs]</a>    <span class="k">def</span> <span class="nf">deletePlugin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Delete plugin</span>
<span class="sd">            </span>
<span class="sd">        :param name: plugin name        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cc3d</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getPluginByName</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
    </div>
<div class="viewcode-block" id="Experiment.setGenericSteppable"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.setGenericSteppable">[docs]</a>    <span class="k">def</span> <span class="nf">setGenericSteppable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">type</span><span class="p">,</span><span class="n">freq</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">elements</span><span class="o">=</span><span class="p">[]):</span>     
        <span class="sd">&quot;&quot;&quot; Set generic steppable. If the steppable is already in the template, it is updated. If not, the plugin is added to the model. This function does not support multi-level xml elements.</span>
<span class="sd">        </span>
<span class="sd">        :param type: steppable type</span>
<span class="sd">        :param freq: frequency</span>
<span class="sd">        :param elements: list of elements described by a dictionary with keys name, value and attributes        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># element = {&#39;name&#39;:name,&#39;value&#39;:val,&#39;attributes&#39;:{}}</span>
        <span class="n">steppable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getSteppableByType</span><span class="p">(</span><span class="nb">type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">freq</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">steppable</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;Frequency&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">freq</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getElement</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">],</span> <span class="n">steppable</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">&#39;value&#39;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="c">#~ if len(e[&#39;value&#39;] &gt; 0):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_setNodeValue</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s">&#39;value&#39;</span><span class="p">]))</span>
            <span class="k">if</span> <span class="s">&#39;attributes&#39;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="n">e</span><span class="p">[</span><span class="s">&#39;attributes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_setAttribute</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">element</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="Experiment.deleteSteppable"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.deleteSteppable">[docs]</a>    <span class="k">def</span> <span class="nf">deleteSteppable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Delete steppable</span>
<span class="sd">        </span>
<span class="sd">        :param type: steppable type        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cc3d</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getSteppableByType</span><span class="p">(</span><span class="nb">type</span><span class="p">))</span>    
    

    <span class="c">#-- Functions for specific settings, plugins, etc --#</span></div>
<div class="viewcode-block" id="Experiment.setMultiCore"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.setMultiCore">[docs]</a>    <span class="k">def</span> <span class="nf">setMultiCore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">threads</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">cores</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set number of threads and cores for a simulation</span>
<span class="sd">            </span>
<span class="sd">        :param threads: number of threads per core</span>
<span class="sd">        :param cores: number of cores</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="n">vpu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getElement</span><span class="p">(</span><span class="s">&quot;VirtualProcessingUnits&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_getElement</span><span class="p">(</span><span class="s">&quot;Metadata&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">cc3d</span><span class="p">))</span>
        <span class="n">vpu</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;ThreadsPerVPU&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">threads</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setNodeValue</span><span class="p">(</span><span class="n">vpu</span><span class="p">,</span><span class="n">cores</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="Experiment.setDebugFrequencyInMeta"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.setDebugFrequencyInMeta">[docs]</a>    <span class="k">def</span> <span class="nf">setDebugFrequencyInMeta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">freq</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set debug frequency</span>
<span class="sd">            </span>
<span class="sd">        :param frequency: frequency</span>
<span class="sd">        &quot;&quot;&quot;</span>        
        <span class="n">debug</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getElement</span><span class="p">(</span><span class="s">&quot;DebugOutputFrequency&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_getElement</span><span class="p">(</span><span class="s">&quot;Metadata&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">cc3d</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setNodeValue</span><span class="p">(</span><span class="n">debug</span><span class="p">,</span><span class="n">freq</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="Experiment.setSeed"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.setSeed">[docs]</a>    <span class="k">def</span> <span class="nf">setSeed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">seed</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set simulation seed</span>
<span class="sd">            </span>
<span class="sd">        :param seed: random seed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPottsProperty</span><span class="p">(</span><span class="s">&quot;RandomSeed&quot;</span><span class="p">,</span><span class="n">value</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Experiment.setMCS"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.setMCS">[docs]</a>    <span class="k">def</span> <span class="nf">setMCS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">mcs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set number of Monte Carlo steps</span>
<span class="sd">            </span>
<span class="sd">        :param mcs: number of MCS (note that mcs+1 appears in the xml)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPottsProperty</span><span class="p">(</span><span class="s">&quot;Steps&quot;</span><span class="p">,</span><span class="n">value</span><span class="o">=</span><span class="n">mcs</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
       </div>
<div class="viewcode-block" id="Experiment.setTemp"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.setTemp">[docs]</a>    <span class="k">def</span> <span class="nf">setTemp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">T</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set temperature tag</span>
<span class="sd">            </span>
<span class="sd">        :param T: temperature </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;Temperature&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">nodeValue</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Experiment.setMotility"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.setMotility">[docs]</a>    <span class="k">def</span> <span class="nf">setMotility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">celltype</span><span class="p">,</span><span class="n">T</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Edit motility parameters per cell type</span>
<span class="sd">            </span>
<span class="sd">        :param celltype: name of the cell type</span>
<span class="sd">        :param T: motility</span>
<span class="sd">        &quot;&quot;&quot;</span> 
        <span class="n">mot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getElement</span><span class="p">(</span><span class="s">&quot;CellMotility&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">potts</span><span class="p">)</span>
        <span class="n">mottypes</span> <span class="o">=</span> <span class="n">mot</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;MotilityParameters&quot;</span><span class="p">)</span>
        <span class="n">typeFound</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">mottypes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;CellType&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">celltype</span><span class="p">:</span>
                <span class="n">e</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;Motility&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">T</span><span class="p">))</span>
                <span class="n">typeFound</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">typeFound</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;MotilityParameters&quot;</span><span class="p">)</span>
            <span class="n">element</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;CellType&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">celltype</span><span class="p">))</span>
            <span class="n">element</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;Motility&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">T</span><span class="p">))</span>
            <span class="n">mot</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>            
    
</div>
<div class="viewcode-block" id="Experiment.addStatistics"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.addStatistics">[docs]</a>    <span class="k">def</span> <span class="nf">addStatistics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">freq</span><span class="p">,</span><span class="n">basename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Edit statistics save options</span>
<span class="sd">        </span>
<span class="sd">        :param freq: save frequency</span>
<span class="sd">        :param basename: basename for files (full path)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getElement</span><span class="p">(</span><span class="s">&quot;EnergyFunctionCalculator&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">potts</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setAttribute</span><span class="p">(</span><span class="s">&quot;Type&quot;</span><span class="p">,</span><span class="s">&quot;Statistics&quot;</span><span class="p">,</span><span class="n">func</span><span class="p">)</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getElement</span><span class="p">(</span><span class="s">&quot;OutputFileName&quot;</span><span class="p">,</span><span class="n">func</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setAttribute</span><span class="p">(</span><span class="s">&quot;Frequency&quot;</span><span class="p">,</span> <span class="n">freq</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setNodeValue</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">basename</span><span class="p">)</span>

    <span class="c">#-- Specific functions to set elements --#</span></div>
<div class="viewcode-block" id="Experiment.setVolume"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.setVolume">[docs]</a>    <span class="k">def</span> <span class="nf">setVolume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">celltype</span><span class="p">,</span><span class="n">vol</span><span class="p">,</span><span class="n">lam</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set volume per cell type</span>
<span class="sd">            </span>
<span class="sd">        :param celltype: cell type name</span>
<span class="sd">        :param vol: target volume</span>
<span class="sd">        :param lam: lambda volume</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">steppable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getPluginByName</span><span class="p">(</span><span class="s">&quot;VolumeFlex&quot;</span><span class="p">)</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="n">steppable</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;VolumeEnergyParameters&quot;</span><span class="p">)</span>
        <span class="n">typeFound</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">celltype</span> <span class="o">==</span> <span class="n">e</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;CellType&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_setAttribute</span><span class="p">(</span><span class="s">&quot;TargetVolume&quot;</span><span class="p">,</span><span class="n">vol</span><span class="p">,</span><span class="n">e</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_setAttribute</span><span class="p">(</span><span class="s">&quot;LambdaVolume&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">lam</span><span class="p">),</span><span class="n">e</span><span class="p">)</span>
                <span class="n">typeFound</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">typeFound</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;VolumeEnergyParameters&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setAttribute</span><span class="p">(</span><span class="s">&quot;CellType&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">celltype</span><span class="p">),</span><span class="n">element</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setAttribute</span><span class="p">(</span><span class="s">&quot;TargetVolume&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">vol</span><span class="p">),</span><span class="n">element</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setAttribute</span><span class="p">(</span><span class="s">&quot;LambdaVolume&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">lam</span><span class="p">),</span><span class="n">element</span><span class="p">)</span>
            <span class="n">steppable</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="Experiment.setContact"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.setContact">[docs]</a>    <span class="k">def</span> <span class="nf">setContact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">_type1</span><span class="p">,</span><span class="n">_type2</span><span class="p">,</span><span class="n">J</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Edit contact energy</span>
<span class="sd">        </span>
<span class="sd">        :param type1: name of the first cell type</span>
<span class="sd">        :param type2: name of the second cell type</span>
<span class="sd">        :param J: contact energy between type1 and type2        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">plugin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getPluginByName</span><span class="p">(</span><span class="s">&quot;Contact&quot;</span><span class="p">)</span>
        <span class="n">energy</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;Energy&quot;</span><span class="p">)</span>
        <span class="n">eFound</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">energy</span><span class="p">:</span> 
            <span class="n">type1</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;Type1&quot;</span><span class="p">)</span>
            <span class="n">type2</span> <span class="o">=</span> <span class="n">rule</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;Type2&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">((</span><span class="n">type1</span> <span class="ow">in</span> <span class="n">_type1</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">type2</span> <span class="ow">in</span> <span class="n">_type2</span><span class="p">))</span> <span class="ow">or</span> <span class="p">((</span><span class="n">type1</span> <span class="ow">in</span> <span class="n">_type2</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">type2</span> <span class="ow">in</span> <span class="n">_type1</span><span class="p">))</span> <span class="p">:</span>
                <span class="n">rule</span><span class="o">.</span><span class="n">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">nodeValue</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">J</span><span class="p">)</span>
                <span class="n">eFound</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">eFound</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;Energy&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setAttribute</span><span class="p">(</span><span class="s">&quot;Type1&quot;</span><span class="p">,</span><span class="n">_type1</span><span class="p">,</span><span class="n">element</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setAttribute</span><span class="p">(</span><span class="s">&quot;Type2&quot;</span><span class="p">,</span><span class="n">_type2</span><span class="p">,</span><span class="n">element</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setNodeValue</span><span class="p">(</span><span class="n">element</span><span class="p">,</span><span class="n">J</span><span class="p">)</span>
            <span class="n">plugin</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>            
    </div>
<div class="viewcode-block" id="Experiment.setSecretion"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.setSecretion">[docs]</a>    <span class="k">def</span> <span class="nf">setSecretion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">celltype</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">solver</span><span class="o">=</span><span class="s">&quot;FastDiffusionSolver2DFE&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set secretion coefficient for specific cell type</span>
<span class="sd">            </span>
<span class="sd">        :param celltype: name of the cell type</span>
<span class="sd">        :param s: secretion coefficient</span>
<span class="sd">        :param solver: solver name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">plugin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getSteppableByType</span><span class="p">(</span><span class="s">&quot;FastDiffusionSolver2DFE&quot;</span><span class="p">)</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;Secretion&quot;</span><span class="p">)</span>
        <span class="n">typeFound</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;Type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">celltype</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_setNodeValue</span><span class="p">(</span><span class="n">e</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
                <span class="n">typeFound</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">typeFound</span><span class="p">:</span>
            <span class="n">sdata</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;SecretionData&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;Secretion&quot;</span><span class="p">)</span>
            <span class="n">element</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;Type&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">celltype</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setNodeValue</span><span class="p">(</span><span class="n">element</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="n">sdata</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="Experiment.setChemotaxis"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.setChemotaxis">[docs]</a>    <span class="k">def</span> <span class="nf">setChemotaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">celltype</span><span class="p">,</span><span class="n">towards</span><span class="p">,</span><span class="n">lam</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set chemotaxis for cell type</span>
<span class="sd">        </span>
<span class="sd">        :param celltype: name of the cell type</span>
<span class="sd">        :param towards: cell type towards chemotaxis occurs</span>
<span class="sd">        :param lam: chemotactic strength</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">plugin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getPluginByName</span><span class="p">(</span><span class="s">&quot;Chemotaxis&quot;</span><span class="p">)</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;ChemotaxisByType&quot;</span><span class="p">)</span>
        <span class="n">typeFound</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s">&quot;Type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">celltype</span><span class="p">:</span>
                <span class="n">e</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;ChemotactTowards&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">towards</span><span class="p">))</span>
                <span class="n">e</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;Lambda&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">lam</span><span class="p">))</span>
                <span class="n">typeFound</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">typeFound</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s">&quot;ChemotaxisByType&quot;</span><span class="p">)</span>
            <span class="n">element</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;Type&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">celltype</span><span class="p">))</span>
            <span class="n">e</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;ChemotactTowards&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">towards</span><span class="p">))</span>
            <span class="n">e</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s">&quot;Lambda&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">lam</span><span class="p">))</span>
            <span class="n">plugin</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s">&quot;ChemicalField&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
            <span class="c">#~ plugin.appendChild(element)             </span>
    </div>
<div class="viewcode-block" id="Experiment.write"><a class="viewcode-back" href="../../Experiment.html#SimUtils.Experiment.Experiment.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Save xml to file &quot;&quot;&quot;</span>       
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">writexml</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>     </div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../SimUtils.html">OpenSimUtils 1.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Margriet Palm.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>